var GuanKaConfig=function(){function t(){}var e=(__define,t);e.prototype;return t.getData=function(){return t.data},t.guankaData=["ResGroupGameLevels0","ResGroupGameLevels1","guanka03load","guanka04load","guanka05load","guanka06load","guanka03load","guanka04load","guanka01load","guanka02load","guanka03load","guanka04load"],t.data=[{xpos:943,ypos:860,ispass:!1,wujin:0},{xpos:774,ypos:849,ispass:!0,wujin:0},{xpos:660,ypos:741,ispass:!0,wujin:0}],t}();egret.registerClass(GuanKaConfig,"GuanKaConfig");var StorageSetting=function(){function t(){}var e=(__define,t);e.prototype;return t.getItem=function(t){var e=egret.localStorage.getItem(t);return null==e&&(e="0"),e},t.loadConfig=function(){var t;t=egret.localStorage.getItem("soundbg"),null==t&&(t="1",egret.localStorage.setItem("soundbg",t)),t=egret.localStorage.getItem("uid"),null==t&&this.getUidAndToken(),t=egret.localStorage.getItem("now_energy"),null==t&&(t="1000",egret.localStorage.setItem("now_energy",t))},t.getUidAndToken=function(){egret.localStorage.setItem("uid",this.GET("uid")),egret.localStorage.setItem("token",this.GET("token"))},t.GET=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=location.search.substr(1).match(e);return null!=i?decodeURI(decodeURIComponent(decodeURI(i[2]))):null},t.setGuankaPass=function(t){egret.localStorage.setItem("ispass"+t,"1"),GuanKaConfig.data[t].ispass=!0},t}();egret.registerClass(StorageSetting,"StorageSetting");var Celebrate=function(t){function e(){t.call(this),this.flower=null,this.flower2=null,this.light=null,this.light2=null,this.bg2=null,this.txt=null,this.stageW=0,this.stageH=0,this._armature=null,this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth,this.index()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.index=function(){this.bg2=new egret.Bitmap(RES.getRes("bg2_png")),this.bg2.width=this.stageW,this.bg2.height=this.stageH,this.addChild(this.bg2),this.lightCon=new egret.DisplayObjectContainer,this.lightCon2=new egret.DisplayObjectContainer,this.light=new egret.Bitmap(RES.getRes("light2_png")),this.light.x=-this.light.width/2,this.lightCon.addChild(this.light),this.lightCon.x=this.stageW/2,this.lightCon.y=.25*this.stageH,this.addChild(this.lightCon),this.lightCon.rotation=30,egret.Tween.get(this.lightCon,{loop:!0}).to({rotation:-30},2e3),this.light2=new egret.Bitmap(RES.getRes("light2_png")),this.light2.x=-this.light2.width/2,this.lightCon2.addChild(this.light2),this.lightCon2.x=this.stageW/2,this.lightCon2.y=.25*this.stageH,this.addChild(this.lightCon2),this.lightCon2.rotation=-30,egret.Tween.get(this.lightCon2,{loop:!0}).to({rotation:30},2e3),this.txt=new egret.Bitmap(RES.getRes("title_png")),this.txt.width=300,this.txt.height=100,this.txt.x=this.stageW/2-this.txt.width/2,this.txt.y=.08*this.stageH,this.addChild(this.txt),this.txt.alpha=0,egret.Tween.get(this.txt).to({alpha:1},500),this._bmpText=new egret.BitmapText;var t=RES.getRes("NumberFont_fnt");this._bmpText.font=t,this._bmpText.text="第81位",this.addChild(this._bmpText),this._bmpText.anchorOffsetX=this._bmpText.width/2,this._bmpText.x=this.stageW/2,this._bmpText.y=this.stageH/2-this._bmpText.height,this.flower=new egret.Bitmap(RES.getRes("flower1_png")),this.flower.y=0,this.addChild(this.flower),this.flower2=new egret.Bitmap(RES.getRes("flower2_png")),this.addChild(this.flower2),this.flower2.y=this.flower2.height,this._colse_w=new egret.Bitmap(RES.getRes("colse_w_png")),this._colse_w.touchEnabled=!0,this.addChild(this._colse_w),this._colse_w.x=this.stageW-this._colse_w.width,this._colse_w.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.people()},s.onEnterFrame=function(t){this.flower2.y+=1,this.flower.y+=1,this.flower.y>=this.stageH&&(this.flower.y=-this.flower.height),this.flower2.y>=this.stageH&&(this.flower2.y=-this.flower2.height)},s.people=function(){var t=RES.getRes("man_json"),e=RES.getRes("texture_json"),i=RES.getRes("texture_png"),s=new dragonBones.EgretFactory;s.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(t)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(i,e));var n=s.buildArmature("man");n.animation.gotoAndPlay("runFront",0,-1,0),dragonBones.WorldClock.clock.add(n),this._armature=n,egret.startTick(this.dbrun,this),this._armature.display.x=this.stageW/2,this._armature.display.y=this.stageH/2+this._armature.display.height/2+50;var r=200/this._armature.display.height;this._armature.display.scaleX=r,this._armature.display.scaleY=r,this.addChild(this._armature.display)},s.stop=function(){egret.stopTick(this.dbrun,this)},s.dbrun=function(t){return dragonBones.WorldClock.clock.advanceTime(.01),!0},s.close=function(){this._colse_w.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.dispatchEventWith(CelebrateEvent.EVT_CLOSE)},e}(egret.Sprite);egret.registerClass(Celebrate,"Celebrate");var Energy=function(t){function e(){t.call(this),this.stageWidth=egret.MainContext.instance.stage.stageWidth,this.stageHeight=egret.MainContext.instance.stage.stageHeight,this.time=0,this._current=0,this._current_p=0,this._t=10,this._difference_value=0,this._total=0,this.energyBar()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.energyBar=function(){this.barbg=new egret.Bitmap,this.barbg.texture=RES.getRes("power5_png"),this.barbg.x=this.stageWidth/2,this.barbg.y=this.stageHeight-118,this.barbg.width=480,this.addChild(this.barbg),this.barbg.anchorOffsetX=this.barbg.width/2,this.barbg.scaleX=.7,this.barbg.scaleY=.7,this.sp=new egret.Sprite,this.addChild(this.sp),this.sp.x=this.stageWidth/2-this.barbg.width/2*.7,this.sp.y=this.stageHeight-118,this.bartop=new egret.Bitmap,this.bartop.texture=RES.getRes("power2_png"),this.bartop.width=480,this.bartop.scaleX=.7,this.bartop.scaleY=.7,this.sp.addChild(this.bartop)},s.setBarProgress=function(t,e){this.maskRect=new egret.Rectangle(0,0,t/e*480,69),this.bartop.mask=this.maskRect,this.createView(t,e)},s.removeProgress=function(t,e){this.removeChild(this.textField),this.maskRect=new egret.Rectangle(0,0,t/e*480,69),this.bartop.mask=this.maskRect,this.createView(t,e)},s.removeProgress_back=function(t,e,i){this._total=i,this._current=e,this._current_p=t,this._difference_value=t-e,this.time=egret.getTimer(),egret.startTick(this.onEnterFrame,this)},s.onEnterFrame=function(t){return this._current_p=this._current_p-Math.ceil(this._difference_value/this._t),this._current_p<=this._current?(egret.stopTick(this.onEnterFrame,this),this.dispatchEventWith(MyselfEvent.ENERGY_MOVE_COMPLETE),this.removeProgress(this._current,this._total)):this.removeProgress(this._current_p,this._total),!1},s.createView=function(t,e){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=this.stageHeight-108+4,this.textField.width=640,this.textField.height=100,this.textField.textAlign="center",this.textField.size=25,this.textField.textColor=7429388,this.textField.fontFamily="SimHei",this.textField.text=t+"/"+e+"步"},e}(egret.Sprite);egret.registerClass(Energy,"Energy");var VectorElements=function(t){function e(){t.call(this),this.posArr=[],this._maxSpeed=.6,this._angle=0,this._pathIndex=0,this._arrivalThreshold=3,this._pathThreshold=5,this.CurveDist=0,this.CurrwayPointIndex=0,this.CurveDistInit=0,this._position=new Vector2D,this._velocity=new Vector2D,this._steeringForce=new Vector2D}__extends(e,t);var i=__define,s=e,n=s.prototype;return n.onEnterFrame=function(t,e){this.followPath(this.posArr),this._velocity=this._velocity.add(this._steeringForce),this._steeringForce=new Vector2D,this._velocity.truncate(this._maxSpeed),this._position=this._position.add(this._velocity),e.x=this._position.x,e.y=this._position.y,e._angle=(180*this._velocity.angle/Math.PI+360)%360},i(n,"position",function(){return this._position},function(t){this._position=t}),i(n,"velocity",function(){return this._velocity},function(t){this._velocity=t}),n.seek=function(t){var e=t.subtract(this._position);e.normalize(),e=e.multiply(this._maxSpeed);var i=e.subtract(this._velocity);this._steeringForce=this._steeringForce.add(i)},n.arrive=function(t){var e=t.subtract(this._position);e.normalize();var i=this._position.dist(t);i>this._arrivalThreshold?e=e.multiply(this._maxSpeed):(e=e.zero(),this._velocity=this._velocity.zero(),this.dispatchEvent(new MyselfEvent(MyselfEvent.Arrived)));var s=e.subtract(this._velocity);this._steeringForce=this._steeringForce.add(s)},n.followPath=function(t,e){void 0===e&&(e=!1);var i=t[this._pathIndex];null!=i&&(this._position.dist(i)<this._pathThreshold&&(this._pathIndex>=t.length-1?e&&(this._pathIndex=0):this._pathIndex++),this._pathIndex>=t.length-1&&!e?this.arrive(i):this.seek(i),this._pathIndex>0&&this.getCurveDistance(this._position.dist(t[this._pathIndex-1]),this._pathIndex-1))},n.getCurveDistance=function(t,e){e!=this.CurrwayPointIndex?(this.CurveDistInit=this.CurveDist,this.CurveDist=this.CurveDistInit):this.CurveDist=this.CurveDistInit+t,this.CurrwayPointIndex=e},n.objStopMove=function(t,e){var i=new Vector2D(t,e);this.posArr=[],this.posArr.push(i),this.posArr.push(i),this._pathIndex=0},e}(egret.Sprite);egret.registerClass(VectorElements,"VectorElements");var xss;!function(t){var e=function(t){function e(){t.call(this),this.i=0,this.shouldkm=0,this.movepx=0,this.service_now_energy=0,this.unlockevent=0,this.unlockCity=0,this.CityEventId=0,this._ID_CityName_text_o="",this.time=0,this._i=0}__extends(e,t);var i=(__define,e),s=i.prototype;return s.addTexture=function(t,e){return this.viewC=new egret.Sprite,this.addChild(this.viewC),this.view=new egret.Bitmap(RES.getRes("point_png")),this.viewC.addChild(this.view),this.view.scaleX=.7,this.view.scaleY=.7,this.viewC.anchorOffsetX=this.view.width/2*this.view.scaleX,this.viewC.anchorOffsetY=this.view.height*this.view.scaleY,this.viewC.x=t,this.viewC.y=e,TweenMax.fromTo(this.viewC,.3,{alpha:0,y:this.viewC.y-30},{alpha:1,y:this.viewC.y,delay:.3}),this},s.imgurl=function(t){RES.getResByUrl(t,this.getResComplete,this,RES.ResourceItem.TYPE_IMAGE)},s.getResComplete=function(t){this.headImg=new egret.Bitmap(t),this.headImg.width=46,this.headImg.height=46,this.headImg.x=this.view.x+36,this.headImg.y=this.view.y+36,this.headImg.anchorOffsetX=this.headImg.width/2,this.headImg.anchorOffsetY=this.headImg.height/2,this.viewC.addChild(this.headImg);var e=new egret.Shape;e.graphics.beginFill(255),e.graphics.drawCircle(this.headImg.width/2,this.headImg.height/2,this.headImg.width/2),e.graphics.endFill(),e.x=this.headImg.x,e.y=this.headImg.y,e.anchorOffsetX=this.headImg.width/2,e.anchorOffsetY=this.headImg.height/2,this.viewC.addChild(e),this.headImg.mask=e},s.drawCircle=function(t,e){return this.shape=new egret.Shape,this.shape.graphics.beginFill(2048,.3),this.shape.graphics.drawCircle(0,0,100),this.shape.graphics.endFill(),this.addChild(this.shape),this.shape.x=t,this.shape.y=e,this},s.onEnterFrameCircle=function(t){this.i>=1?this.i=0:this.i+=.01,this.shape.scaleX=this.i,this.shape.scaleY=this.i,this.shape.alpha=1-this.i},s.myselfmoveInit=function(t){this.posArr=[],this._pathIndex=0,this._position.x=this.viewC.x=t[0][0],this._position.y=this.viewC.y=t[0][1];var e,i=0;t.length;for(i;i<t.length;i++)e=new Vector2D(t[i][0],t[i][1]),this.posArr.push(e)},s.putkm=function(t,e,i){var s=this,n=new egret.URLLoader,r=new egret.URLRequest("http://www.51tywy.com/service/crossdomain/user/putkm");r.data=new egret.URLVariables("km="+t+"&uid="+StorageSetting.getItem("uid")+"&token="+StorageSetting.getItem("token")),r.method=egret.URLRequestMethod.POST,n.load(r),n.addEventListener(egret.Event.COMPLETE,function(n){s._Netdata=JSON.parse(n.target.data),s.roadArr1=s._Netdata.data.MyRoadXY,s.shouldkm=parseInt(s._Netdata.data.consumkm),s.movepx=parseInt(s._Netdata.data.movepx),s.service_now_energy=parseInt(s._Netdata.data.now_energy),i.removeProgress_back(t,s.service_now_energy,e),egret.localStorage.setItem("now_energy",s.service_now_energy.toString()),s.unlockevent=parseInt(s._Netdata.data.unlockevent),s.unlockCity=parseInt(s._Netdata.data.unlockcity),s.CityEventId=parseInt(s._Netdata.data.CityEventId),s._ID_CityName_text_o=s._Netdata.data.f_arrive_city_name,i.addEventListener(MyselfEvent.ENERGY_MOVE_COMPLETE,function(){if(s.shouldkm>0){var t=new MyLinear;s.roadArr2=t.getEndXY(s.roadArr1,s.movepx,!0),s.myselfmoveInit(s.roadArr2),s.moveStart(),s.addEventListener(MyselfEvent.Arrived,s.StopTimer,s)}},s),s.unlockCity&&s.DounlockCity(),s.unlockevent&&0==s.shouldkm&&(s.dispatchEventWith(QuertionListEvent.EVT_OPEN_ALERT),s.Dounlockevent())},this)},s.moveStart=function(){this.time=egret.getTimer(),egret.startTick(this.onEnterFrame,this)},s.stopMoveStart=function(){egret.stopTick(this.onEnterFrame,this)},s.onEnterFrame=function(e){return t.prototype.onEnterFrame.call(this,e,this.viewC),!1},s.StopTimer=function(t){this._i?(this._i=0,this.stopMoveStart(),this.removeEventListener(MyselfEvent.Arrived,this.StopTimer,this),this.unlockevent?(this.dispatchEventWith(QuertionListEvent.EVT_OPEN_ALERT),this.Dounlockevent()):this.dispatchEventWith("arriced_bourn",!1)):this._i+=1},s.Dounlockevent=function(){var t=this;this._QUERTIONCONT=new egret.DisplayObjectContainer,this.parent.$parent.addChild(this._QUERTIONCONT),this._QuertionCommonUI=new QuertionCommonUI,this._QUERTIONCONT.addChild(this._QuertionCommonUI),this._QuertionCommonUI.eventid=this.unlockevent,this._QuertionCommonUI.CityEventId=this.CityEventId,this._QuertionCommonUI.ID_CityName_text=this._ID_CityName_text_o,this._QUERTIONCONT.alpha=0,TweenMax.fromTo(this._QUERTIONCONT,.5,{y:0,scaleX:.1,alpha:.1,rotation:90},{alpha:1,delay:.8,y:(egret.MainContext.instance.stage.stageHeight-700)/2,scaleX:1,rotation:0,ease:Circ.easeOut}),this._QuertionCommonUI.addEventListener(QuertionListEvent.EVT_CLOSE,function(){t.quertioncloseHandle()},this),this._QuertionCommonUI.addEventListener(QuertionListEvent.EVT_REAL_AWARD,function(e){t.finished(e)},this)},s.quertioncloseHandle=function(){var t=this;TweenMax.to(this._QUERTIONCONT,.3,{scaleX:.1,scaleY:.1,ease:Back.easeIn,onComplete:function(){t._QUERTIONCONT.removeChild(t._QuertionCommonUI)}}),this.dispatchEventWith(QuertionListEvent.EVT_CLOSE_ALERT)},s.DounlockCity=function(){this.dispatchEventWith(QuertionListEvent.EVT_OPENArriceNewCity_ALERT)},s.finished=function(t){var e=this;TweenMax.to(this._QUERTIONCONT,.3,{scaleX:.1,scaleY:.1,ease:Back.easeIn,onComplete:function(){var i=this,s=new egret.URLLoader,n=new egret.URLRequest("http://www.51tywy.com/service/crossdomain/achieve/receiveAchievementAward");n.data=new egret.URLVariables("CityEventId="+t._eventid+"&uid="+StorageSetting.getItem("uid")+"&token="+StorageSetting.getItem("token")),n.method=egret.URLRequestMethod.POST,s.load(n),s.addEventListener(egret.Event.COMPLETE,function(t){i._Netdata=JSON.parse(t.target.data),e.ReceveAchievementAwardUI.desc_text="积分："+i._Netdata.data.f_reward_points+"分"},this),e._QUERTIONCONT.removeChild(e._QuertionCommonUI),e.ReceveAchievementAwardUI=new ReceveAchievementAwardUI,e.parent.$parent.addChild(e.ReceveAchievementAwardUI),e.ReceveAchievementAwardUI.addEventListener(QuertionListEvent.EVT_CLOSEREWADR_ALERT,function(){e.closefinished()},e),TweenMax.fromTo(e.ReceveAchievementAwardUI,.5,{y:0,scaleX:.1,alpha:.1,rotation:90},{alpha:1,delay:.8,y:(egret.MainContext.instance.stage.stageHeight-400)/2,scaleX:1,rotation:0,ease:Circ.easeOut})}}),this.dispatchEventWith(QuertionListEvent.EVT_CLOSE_ALERT)},s.closefinished=function(){var t=this;TweenMax.to(this.ReceveAchievementAwardUI,.3,{scaleX:.1,scaleY:.1,ease:Back.easeIn,onComplete:function(){t.parent.$parent.removeChild(t.ReceveAchievementAwardUI)}})},e}(VectorElements);t.Myself=e,egret.registerClass(e,"xss.Myself")}(xss||(xss={}));var Question=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);i.prototype;return e}(eui.ItemRenderer);egret.registerClass(Question,"Question");var xss;!function(t){var e=function(e){function i(){var t=this;e.call(this),this.now_energy=0,this.most_energy=0,this._isfirst=0,this.bg=null,this.bgcontent=null,this.stageW=0,this.stageH=0,this.leftBtn=null,this.rightBtn=null,this.topBtn=null,this.bottomBtn=null,this.myselfLocationX=0,this.myselfLocationY=0,this._energy=null,this.soundbg=null,this._Hollowed=null,this.share=null,this.backToApp=null,this.isMultiMode=!1,this._share=null,this.moveStartX=0,this.moveStartY=0,this.moveEndX=0,this.moveEndY=0,this._go_tip_con=null,this.bgS=null;var i=new egret.URLLoader,s=new egret.URLRequest("http://www.51tywy.com/service/crossdomain/index/init");s.data=new egret.URLVariables("uid="+StorageSetting.getItem("uid")+"&token="+StorageSetting.getItem("token")),s.method=egret.URLRequestMethod.POST,i.load(s),i.addEventListener(egret.Event.COMPLETE,function(e){t._Netdata=JSON.parse(e.target.data),t.myselfLocationX=parseFloat(t._Netdata.data.myselfLocationX),t.myselfLocationY=parseFloat(t._Netdata.data.myselfLocationY),t.now_energy=parseInt(t._Netdata.data.now_energy),egret.localStorage.setItem("now_energy",t.now_energy.toString()),t.most_energy=t._Netdata.data.most_energy,t._isfirst=parseInt(t._Netdata.data.isfirst),t._headimgUrl=t._Netdata.data.photo,t.init()},this)}__extends(i,e);var s=(__define,i),n=s.prototype;return n.init=function(){this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth,this.bgcontent=new egret.Sprite,this.addChild(this.bgcontent),this.bg=new egret.Bitmap(RES.getRes("map-js_png")),this.bgcontent.addChild(this.bg),this.bg.width=.5*this.bg.width,this.bg.height=.5*this.bg.height,this.share=new egret.Bitmap(RES.getRes("share_png")),this.share.touchEnabled=!0,this.share.scaleX=1,this.share.scaleY=1,this.share.x=5,this.share.y=105,this.share.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareF,this),this.addChild(this.share);var e=this.share.y;egret.Tween.get(this.share,{loop:!0}).to({y:e-5},500).to({y:e},500),this.backToApp=new egret.Bitmap(RES.getRes("back_png")),this.backToApp.touchEnabled=!0,this.backToApp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backToAppF,this),this.backToApp.scaleX=1,this.backToApp.scaleY=1,this.backToApp.x=5,this.backToApp.y=5,this.addChild(this.backToApp);var i=this._Netdata.data.cityXY;this._World=new World(i),this.bgcontent.addChild(this._World),this.myself=new t.Myself,this.bgcontent.addChild(this.myself),this.myself.addTexture(this.myselfLocationX,this.myselfLocationY),this.myself.imgurl(this._headimgUrl);var s=this.myself.y;egret.Tween.get(this.myself,{loop:!0}).to({y:s-5},500).to({y:s},500),this._energy=new Energy,this.addChild(this._energy),this._energy.setBarProgress(this.now_energy,this.most_energy),this.bottomBtn=new egret.Bitmap(RES.getRes("power3_png")),this.bottomBtn.x=this.stageW-140,this.bottomBtn.y=this.stageH-94,this.bottomBtn.alpha=0,this.addChild(this.bottomBtn),this.bottomBtn.anchorOffsetX=this.bottomBtn.width/2,this.bottomBtn.anchorOffsetY=this.bottomBtn.height/2,egret.Tween.get(this.bottomBtn,{loop:!0}).to({scaleX:.9,scaleY:.9},1e3).to({scaleX:1,scaleY:1},1e3);var n=this;if(TweenMax.to(this.bottomBtn,.3,{alpha:1,ease:Sine.easeInOut,delay:.1,onComplete:function(){if(n._isfirst){var t=n.bottomBtn.x,e=n.bottomBtn.y,i=n.bottomBtn.width/2;n._Hollowed=new HollowedOutLayer(t,e,i,.8),n.addChild(n._Hollowed)}}}),this.bgcontent.touchEnabled=!0,this.bgcontent.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.moveStart,this),this.bgcontent.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.bgcontent.addEventListener(egret.TouchEvent.TOUCH_END,this.moveEnd,this),this.bottomBtn.touchEnabled=!0,this.bottomBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.bottomBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),egret.MainContext.deviceType==egret.MainContext.DEVICE_PC){var r=new TestGesture;r.addEventListener(egret.TouchEvent.TOUCH_END,this.toggleButtonHandler,this),this.addChild(r),r.x=this.stageW-r.width,this.btn=r}this.testGesture(),this.Locator(this.myselfLocationX,this.myselfLocationY)},n.testGesture=function(){egret.MainContext.deviceType==egret.MainContext.DEVICE_PC&&(neoges.GestureManager.showTouchPoint=!0);var t=new neoges.PinchGesture(this.bgcontent);t.addEventListener(neoges.GestureEvent.BEGAN,this.onPinchBegan,this),t.addEventListener(neoges.GestureEvent.UPDATE,this.onPinchUpdate,this),t.addEventListener(neoges.GestureEvent.ENDED,this.onPinchEnd,this)},n.toggleButtonHandler=function(t){this.isMultiMode=!this.isMultiMode,this.btn.setLabel(this.isMultiMode?"多点模式":"单点模式"),neoges.GestureManager.simulateMultitouch=this.isMultiMode},n.onPinchBegan=function(t){this.startScaleValue=this.bgcontent.scaleX},n.onPinchUpdate=function(t){console.log("pinch update "+t.value),this.bgcontScale(t.value)},n.onPinchEnd=function(t){},n.bgcontScale=function(t){this.startScaleValue*t*this.bgcontent.width>this.bgcontent.width&&(this.bgcontent.scaleX=this.startScaleValue*t,this.bgcontent.scaleY=this.bgcontent.scaleX,this.bgcontent.height=this.bg.height*this.bgcontent.scaleY,this.bgcontent.width=this.bg.width*this.bgcontent.scaleX,this.bgcontent.scaleY*this.bgcontent.height<=this.stageH-this.bgcontent.y&&(this.bgcontent.scaleY=(this.stageH-this.bgcontent.y)/this.bgcontent.height,this.bgcontent.height=this.bg.height*this.bgcontent.scaleY),this.bgcontent.scaleX*this.bgcontent.width<=this.stageW-this.bgcontent.x&&(this.bgcontent.scaleX=(this.stageW-this.bgcontent.x)/this.bgcontent.width,this.bgcontent.width=this.bg.width*this.bgcontent.scaleX),this.bgcontent.width>3*this.bg.width&&(this.bgcontent.scaleX=3,this.bgcontent.width=3*this.bg.width),this.bgcontent.height>3*this.bg.height&&(this.bgcontent.scaleY=3,this.bgcontent.height=3*this.bg.height))},n.shareF=function(){this.Scroll_touch_close(),this._share=new Share,this.addChild(this._share),this._share.getNet(),this.stage.addEventListener("jsNotifyts",this.doTsMethod,this)},n.doTsMethod=function(){this.Scroll_touch_open(),this.removeChild(this._share),this._share=null},n.Scroll_touch_close=function(){this.bgcontent.touchEnabled=!1,this.myself.touchEnabled=!1,this.bottomBtn.touchEnabled=!1},n.Scroll_touch_open=function(){this.bgcontent.touchEnabled=!0,this.myself.touchEnabled=!0,this.bottomBtn.touchEnabled=!0},n.backToAppF=function(){callJsFunc()},n.changeSoundbgImage=function(){var t=parseInt(StorageSetting.getItem("soundbg"));t?(this.soundbg=new egret.Bitmap(RES.getRes("sound_png")),this.soundbg.scaleX=this.soundbg.scaleY=.6,this.addChild(this.soundbg),this.soundbg.x=this.stage.stageWidth-.6*this.soundbg.width*.5-10,this.soundbg.y=.5*this.soundbg.height,this.soundbg.touchEnabled=!0,this.soundbg.anchorOffsetX=.5*this.soundbg.width,this.soundbg.anchorOffsetY=.5*this.soundbg.height,this.soundbg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playsoundbg,this),SoundManager.playBgSound("Music_mp3")):(this.soundbg=new egret.Bitmap(RES.getRes("sound_stop_png")),this.soundbg.scaleX=this.soundbg.scaleY=.6,this.addChild(this.soundbg),this.soundbg.x=this.stage.stageWidth-.6*this.soundbg.width*.5-10,this.soundbg.y=.5*this.soundbg.height,this.soundbg.touchEnabled=!0,this.soundbg.anchorOffsetX=.5*this.soundbg.width,this.soundbg.anchorOffsetY=.5*this.soundbg.height,this.soundbg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playsoundbg,this))},n.playsoundbg=function(){var t=parseInt(StorageSetting.getItem("soundbg"));t?(SoundManager.stopBgSound(),egret.localStorage.setItem("soundbg","0")):(SoundManager.playBgSound("Music_mp3"),egret.localStorage.setItem("soundbg","1"),console.dir(this.soundbg))},n.moveStart=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN&&(this.moveStartX=t.localX,this.moveStartY=t.localY)},n.move=function(t){t.type==egret.TouchEvent.TOUCH_MOVE&&(this.moveEndX=t.localX,this.moveEndY=t.localY,this.moveBg())},n.moveEnd=function(t){t.type==egret.TouchEvent.TOUCH_END&&(this.bgcontent.x-=0,this.bgcontent.y-=0)},n.moveBg=function(){var t=this.moveEndX-this.moveStartX,e=this.moveEndY-this.moveStartY,i=Math.abs(t),s=Math.abs(e),n=30;i>n&&(this.bgcontent.x-=-t),s>n&&(this.bgcontent.y-=-e);var r=this.stageW-this.bgcontent.width,h=this.stageH-this.bgcontent.height;this.bgcontent.x<=r?this.bgcontent.x=r:this.bgcontent.x>=0&&(this.bgcontent.x=0),this.bgcontent.y<=h?this.bgcontent.y=h:this.bgcontent.y>=0&&(this.bgcontent.y=0)},n.onTouchBegin=function(t){this.bottomBtn.touchEnabled=!1,this.Locator(this.myselfLocationX,this.myselfLocationY,!0)},n.Myselfmove=function(){var t=this;null!=this._Hollowed&&this._Hollowed.parent&&this._Hollowed.parent.removeChild(this._Hollowed),this.now_energy=parseInt(StorageSetting.getItem("now_energy")),this.now_energy>0?(this.myself.putkm(this.now_energy,this.most_energy,this._energy),this.stage.addEventListener("shareOpen",this.shareF,this)):this.go(),this.myself.addEventListener(QuertionListEvent.EVT_OPEN_ALERT,this.RemoveonTouchBegin,this),this.myself.addEventListener(QuertionListEvent.EVT_CLOSE_ALERT,this.AddonTouchBegin,this),this.myself.addEventListener(QuertionListEvent.EVT_OPENArriceNewCity_ALERT,this.ArricedNewCity,this),this.myself.addEventListener("arriced_bourn",function(e){t._bottomBtn_Touch(!0)},this)},n._bottomBtn_Touch=function(t){this.bottomBtn.touchEnabled=t},n.go=function(){this.bottomBtn.touchEnabled=!1,this._go_tip_con=new egret.Sprite,this._go_tip_con.graphics.beginFill(0,.7),this._go_tip_con.graphics.drawRect(0,0,this.stageW/2,50),this._go_tip_con.graphics.endFill(),this._go_tip_con.anchorOffsetX=this.stageW/2*.5,this._go_tip_con.x=this.stageW/2,this.addChild(this._go_tip_con),this._go_tip=new egret.TextField,this._go_tip.text="加油。走起来！1步=1能量",this._go_tip.width=this.stageW/2,this._go_tip.size=25,this._go_tip.height=55,this._go_tip.textAlign=egret.HorizontalAlign.CENTER,this._go_tip.verticalAlign=egret.VerticalAlign.MIDDLE,this._go_tip_con.addChild(this._go_tip),this._go_tip_con.y=this._energy.barbg.y-90;var t=this;TweenMax.to(this._go_tip_con,.3,{alpha:1,x:400,y:400,delay:3,onComplete:function(){t.removeChild(t._go_tip_con),t.bottomBtn.touchEnabled=!0}})},n.AddonTouchBegin=function(){this.bottomBtn.touchEnabled=!0,this.bottomBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.bgcontent.touchEnabled=!0,this.removeChild(this.bgS)},n.RemoveonTouchBegin=function(t){this.bottomBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.bgS=new egret.Sprite,this.bgS.graphics.beginFill(0),this.bgS.graphics.drawRect(0,0,this.stageW,this.stageH),this.bgS.graphics.endFill(),this.bgS.touchEnabled=!1,this.bgcontent.touchEnabled=!1,this.addChild(this.bgS),this.bgS.alpha=.5},n.ArricedNewCity=function(){var t=this,e=new egret.URLLoader,i=new egret.URLRequest("http://www.51tywy.com/service/crossdomain/city/ArrivedCity");i.data=new egret.URLVariables("uid="+StorageSetting.getItem("uid")+"&token="+StorageSetting.getItem("token")),i.method=egret.URLRequestMethod.POST,e.load(i),e.addEventListener(egret.Event.COMPLETE,function(e){t._Netdata=JSON.parse(e.target.data),t._ArrivedNewCity=new ArrivedNewCityUI,t.addChild(t._ArrivedNewCity),t._ArrivedNewCity.y=(egret.MainContext.instance.stage.stageHeight-t._ArrivedNewCity.height)/2,t._ArrivedNewCity.addEventListener(QuertionListEvent.EVT_CLOSArriceNewCity_ALERT,function(){t.arriveNewCitycloseHandle()},t);var i,s=(parseInt(t._Netdata.data.f_now_cityIdSort),parseInt(t._Netdata.data.px)),n=parseInt(t._Netdata.data.py);i=Utils.createBitmapByName("pin-active_png"),i.x=s,i.y=n,t._World.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height},this)},n.arriveNewCitycloseHandle=function(){var t=this;this.bottomBtn.touchEnabled=!0,this._ArrivedNewCity.removeEventListener(QuertionListEvent.EVT_CLOSArriceNewCity_ALERT,function(){t.arriveNewCitycloseHandle()},this),this.removeChild(this._ArrivedNewCity)},n.onTouchEnd=function(t){},n.xx=function(){var t=new egret.RenderTexture;t.drawToTexture(this),t.saveToFile("image/png","a/down.png")},n.Locator=function(t,e,i){void 0===i&&(i=!1),t*=this.bgcontent.scaleX,e*=this.bgcontent.scaleY;var s=this.stageW/2,n=this.bgcontent.width-this.stageW/2,r=this.stageH/2,h=this.bgcontent.height-this.stageH/2,o=0,a=0;o=s>t?s:t>n?n:t,a=r>e?r:e>h?h:e;var d=this;egret.Tween.get(this.bgcontent).to({x:this.stageW/2-o,y:this.stageH/2-a},200).call(function(){console.log("定位完成"),i&&d.Myselfmove()})},i}(egret.Sprite);t.Scroll=e,egret.registerClass(e,"xss.Scroll")}(xss||(xss={}));var Share=function(t){function e(){t.call(this),this.stageW=0,this.stageH=0,this.sumsteps=0,this.bgc=null,this.citybg=null,this.bgurl="",this.iconurl="",this.photo=null,this.down_c=null,this.share_url="",this.share_title="",this.share_content="",this.share_imgurl="",this.NowCityName="",this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth}__extends(e,t);var i=(__define,e),s=i.prototype;return s.getNet=function(){var t=this,e=new egret.URLLoader,i=new egret.URLRequest("http://www.51tywy.com/service/crossdomain/user/shareInfo");i.data=new egret.URLVariables("&uid="+StorageSetting.getItem("uid")+"&token="+StorageSetting.getItem("token")),i.method=egret.URLRequestMethod.POST,e.load(i),e.addEventListener(egret.Event.COMPLETE,function(e){t._Netdata=JSON.parse(e.target.data),t.sumsteps=parseInt(t._Netdata.data.sumsteps),t.bgurl=t._Netdata.data.citybg,t.iconurl=t._Netdata.data.photo,t.NowCityName=t._Netdata.data.cityName,t.share_url=t._Netdata.data.shareInfo.url,t.share_title=t._Netdata.data.shareInfo.title,t.share_content=t._Netdata.data.shareInfo.content,t.share_imgurl=t._Netdata.data.shareInfo.imgurl,t.index()},this)},s.index=function(){this.bgc=new egret.Sprite,this.addChild(this.bgc),this.citybg=new egret.Bitmap,RES.getResByUrl(this.bgurl,this.bgurlComplete,this,RES.ResourceItem.TYPE_IMAGE),this.citybg.width=this.stageW,this.citybg.height=this.stageH,this.citybg.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.AppToWapValues,this),this.bgc.addChild(this.citybg),this.sumstepstxt=new egret.TextField,this.sumstepstxt.textAlign="center",this.sumstepstxt.width=640,this.sumstepstxt.height=100,this.sumstepstxt.y=60,this.addChild(this.sumstepstxt),this.sumstepstxt.textColor=16701008,this.sumstepstxt.size=25,this.sumstepstxt.textFlow=[{text:this.NowCityName.toString(),style:{textColor:6905720,size:40,strokeColor:16777215,stroke:2}}];var t=Utils.createBitmapByName("avatar-bg@1125_png");t.width=80,t.height=80,t.x=88,t.y=this.stageH-120-150+40,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t),RES.getResByUrl(this.iconurl,this.iconurlComplete,this,RES.ResourceItem.TYPE_IMAGE),this.desc_c=new egret.Sprite,this.desc_c.x=138,this.desc_c.y=this.stageH-120-150,this.addChild(this.desc_c);var e=Utils.createBitmapByName("bubble@1125_png");e.width=376,e.height=80,this.desc_c.addChild(e);var i=new egret.TextField;i.textFlow=(new egret.HtmlTextParser).parser('今天走了<font color="#e9bb4d" fontFamily="Verdana">'+this.sumsteps.toString()+"</font>步\n中国这么大，我要走一圈。"),i.textColor=9739682,i.size=18,i.x=30,i.y=20,i.lineSpacing=10,this.desc_c.addChild(i),this.down_c=new egret.Sprite,this.down_c.width=this.stageW,this.down_c.height=120,this.down_c.x=0,this.down_c.y=this.stageH-this.down_c.height,this.addChild(this.down_c);var s=new egret.Shape;s.graphics.beginFill(16777215,1),s.graphics.drawRect(0,0,this.down_c.width,this.down_c.height),s.graphics.endFill(),this.down_c.addChild(s);var n=Utils.createBitmapByName("logo@1125_png");n.x=50,n.y=20,n.width=80,n.height=80,this.down_c.addChild(n);var r=Utils.createBitmapByName("qrcode@1125_png");r.x=this.stageW-110,r.y=20,r.width=80,r.height=80,this.down_c.addChild(r);var h=new egret.TextField;h.textFlow=(new egret.HtmlTextParser).parser('<font color="#949da2" size="25" fontFamily="Verdana">体育委员</font>\n<font color="#949da2" size="16" fontFamily="Verdana">行万里路，读万卷书</font>'),h.x=n.x+n.width+20,h.y=20,this.down_c.addChild(h),this.TsCallJs_share()},s.AppToWapValues=function(){AppToWapValue(1)},s.bgurlComplete=function(t){this.citybg.texture=t},s.iconurlComplete=function(t){this.photo=new egret.Bitmap(t),this.photo.width=70,this.photo.height=70,this.photo.x=88,this.photo.y=this.stageH-120-150+40,this.photo.anchorOffsetX=this.photo.width/2,this.photo.anchorOffsetY=this.photo.height/2,this.addChild(this.photo);
var e=new egret.Shape;e.graphics.beginFill(255),e.graphics.drawCircle(this.photo.width/2,this.photo.height/2,this.photo.width/2),e.graphics.endFill(),e.x=this.photo.x,e.y=this.photo.y,e.anchorOffsetX=this.photo.width/2,e.anchorOffsetY=this.photo.height/2,this.addChild(e),this.photo.mask=e},s.TsCallJs_share=function(){WebShareInApp(this.share_url,this.share_imgurl,this.share_title,this.share_content)},s.JsCallTs_share_de=function(t){if(t){var e=egret.MainContext.instance;e.stage.dispatchEventWith("jsNotifyts",!1)}},e}(egret.Sprite);egret.registerClass(Share,"Share");var TestGesture=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.touchChildren=!1,this.touchEnabled=!0}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setLabel=function(t){this.txt.text=t},s.onAddToStage=function(t){var e=this.graphics;e.beginFill(16711680,1),e.drawRoundRect(0,0,150,40,8,8),e.endFill(),this.txt=new egret.TextField,this.txt.text="单点模式",this.txt.x=14,this.txt.y=4,this.addChild(this.txt)},e}(egret.Sprite);egret.registerClass(TestGesture,"TestGesture");var World=function(t){function e(e){t.call(this),this.GuanKaConfigArr=e,this.init()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(){this.flagArr=[];for(var t,e=this.GuanKaConfigArr,i=e.length,s=0;i>s;s++){var n=e[s].ispass,r=n?"pin-active_png":"pin-inactive_png";t=Utils.createBitmapByName(r),this.addChild(t),t.x=e[s].xpos,t.y=e[s].ypos,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height,this.addChild(t),this.flagArr.push(t)}for(var s=0;s<this.flagArr.length;s++)TweenMax.fromTo(this.flagArr[s],.3,{alpha:0,y:this.flagArr[s].y-30},{alpha:1,y:this.flagArr[s].y,delay:.1*s+1})},s.choseGuanka=function(t){this.removeLis(),this.showXZ()},s.removeLis=function(){for(var t,e,t=0;t<this.flagArr.length;t++)e=this.flagArr[t],e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)},s.addLis=function(){for(var t,e,t=0;t<this.flagArr.length;t++)e=this.flagArr[t],e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)},s.showXZ=function(){var t=this;this.xzmb=new egret.DisplayObjectContainer,this.parent.$parent.addChild(this.xzmb),this.xzmb.x=0,this.xzmb.width=480,this.xzmb.height=545,this.xzmb.y=egret.MainContext.instance.stage.stageHeight,this._city=new CityUI,this.xzmb.addChild(this._city),this._city.addEventListener(CityEvent.EVT_CLOSE,function(){t.closeHandle()},this),TweenMax.fromTo(this.xzmb,2,{alpha:0,y:this.xzmb.y},{alpha:1,y:this.xzmb.y-this.xzmb.height})},s.closeHandle=function(){var t=this;TweenMax.to(this.xzmb,.3,{scaleX:.1,scaleY:.1,ease:Back.easeIn,onComplete:function(){t.parent.$parent.removeChild(t.xzmb),t.xzmb=null,t.addLis()}})},s.destroy=function(){TweenMax.killChildTweensOf(this);for(var t=0;t<this.flagArr.length;t++)this.flagArr[t].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)},e}(egret.Sprite);egret.registerClass(World,"World");var ArrivedNewCityUI=function(t){function e(){t.call(this),this.stageW=0,this.stageH=0,this.addEventListener(eui.UIEvent.COMPLETE,this.StartAnswer,this),this.skinName="resource/skins/ArriveNewCitySkin.exml",this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth}__extends(e,t);var i=(__define,e),s=i.prototype;return s.StartAnswer=function(){this.ID_ArriveNewCity_button.touchEnabled=!0,this.ID_ArriveNewCity_button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick_close,this)},s.onclick_close=function(){this.dispatchEventWith(QuertionListEvent.EVT_CLOSArriceNewCity_ALERT)},e}(eui.Component);egret.registerClass(ArrivedNewCityUI,"ArrivedNewCityUI");var CityUI=function(t){function e(){t.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.skinName="resource/skins/CitySkin.exml"}__extends(e,t);var i=(__define,e),s=i.prototype;return s.uiCompHandler=function(){this.xx_png.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick_begin,this);var t=[{icon:"heros01_png",heroName:"问题1",comment:"评价：樱桃小丸子",checked:!1},{icon:"heros02_png",heroName:"问题2",comment:"评价：离了我你不行的",checked:!0},{icon:"heros01_png",heroName:"问题1",comment:"评价：樱桃小丸子",checked:!1},{icon:"heros02_png",heroName:"问题2",comment:"评价：离了我你不行的",checked:!0},{icon:"heros01_png",heroName:"问题1",comment:"评价：樱桃小丸子",checked:!1},{icon:"heros02_png",heroName:"问题2",comment:"评价：离了我你不行的",checked:!0},{icon:"heros01_png",heroName:"问题1",comment:"评价：樱桃小丸子",checked:!1},{icon:"heros02_png",heroName:"问题2",comment:"评价：离了我你不行的",checked:!0},{icon:"heros01_png",heroName:"问题1",comment:"评价：樱桃小丸子",checked:!1},{icon:"heros02_png",heroName:"问题2",comment:"评价：离了我你不行的",checked:!0}];this.listHeros.dataProvider=new eui.ArrayCollection(t),this.listHeros.itemRenderer=HerosListIRSkin},s.onclick_begin=function(){this.dispatchEventWith(CityEvent.EVT_CLOSE)},e}(eui.Component);egret.registerClass(CityUI,"CityUI");var HerosListIRSkin=function(t){function e(){t.call(this),this.skinName="resource/skins/CityQuerySkin.exml"}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this)},e}(eui.ItemRenderer);egret.registerClass(HerosListIRSkin,"HerosListIRSkin");var QuertionCommonUI=function(t){function e(){t.call(this),this.stageW=0,this.stageH=0,this.firstEventId=0,this._CityEventId=0,this._ID_CityName_text="",this.addEventListener(eui.UIEvent.COMPLETE,this.StartAnswer,this),this.skinName="resource/skins/QuertionCommonSkin.exml",this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth}__extends(e,t);var i=__define,s=e,n=s.prototype;return n.StartAnswer=function(){this.ID_quertionclose_png.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick_close,this),this.ID_Buttons.baseImage.source=RES.getRes("start-btn_png"),this.ID_Buttons.baseImage.width=300,this.ID_Buttons.baseImage.height=75,this.ID_Buttons.touchEnabled=!0,this.ID_Buttons.addEventListener(egret.TouchEvent.TOUCH_TAP,this.StartAnswerAlert,this)},n.onclick_close=function(){this.dispatchEventWith(QuertionListEvent.EVT_CLOSE)},n.StartAnswerAlert=function(){var t=this;TweenMax.to(t.ID_group,.01,{alpha:0,onComplete:function(){t.AnswerList()}})},n.AnswerList=function(){var t=this;this._quertionListUI=new QuertionListUI(this._eventid),this._quertionListUI.alpha=0,this.addChild(this._quertionListUI),this._quertionListUI.addEventListener(QuertionListEvent.EVT_CORRECT_ALERT,function(){t.CorrectAlert()},this),this._quertionListUI.addEventListener(QuertionListEvent.EVT_ERROR_ALERT,function(e){t.firstEventId=parseInt(e._rewardInfo.firstEventId),t.ErrorAlert()},this),this._quertionListUI.addEventListener(QuertionListEvent.EVT_NEXTEVENT_ALERT,function(e){var i=t;TweenMax.to(i._quertionListUI,.5,{alpha:1,y:-1e3,delay:.2,onComplete:function(){i.removeChild(i._quertionListUI),i._eventid=e._eventid,i.StartAnswerAlert()}})},this),TweenMax.fromTo(this._quertionListUI,.3,{alpha:0,y:-4e3},{alpha:1,y:0,delay:.3})},n.CorrectAlert=function(){var t=this;this._quertionListUI.removeEventListener(QuertionListEvent.EVT_CORRECT_ALERT,function(){t.CorrectAlert()},this),this._quertionListUI.removeEventListener(QuertionListEvent.EVT_ERROR_ALERT,function(){t.ErrorAlert()},this),this.ID_Buttons.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.StartAnswerAlert,this);var e=this;TweenMax.to(e._quertionListUI,.3,{scaleX:.1,scaleY:.1,ease:Back.easeIn,delay:.2,onComplete:function(){e.removeChild(e._quertionListUI),e._quertionListUI=null,e.ID_Buttons.baseImage.source=RES.getRes("promotion-btn_png"),e.ID_QuertionCommonIcon.source=RES.getRes("finished_png"),e.ID_CityName.text="恭喜您",e.ID_Buttons.addEventListener(egret.TouchEvent.TOUCH_TAP,e.receiveAchievementAward,e),TweenMax.fromTo(e.ID_group,.3,{alpha:0,y:-4e3},{alpha:1,y:0,delay:.3})}})},n.receiveAchievementAward=function(){var t=new QuertionListEvent(QuertionListEvent.EVT_REAL_AWARD,this._CityEventId);this.dispatchEvent(t)},n.ErrorAlert=function(){var t=this;this._quertionListUI.removeEventListener(QuertionListEvent.EVT_ERROR_ALERT,function(){t.ErrorAlert()},this),this._quertionListUI.removeEventListener(QuertionListEvent.EVT_CORRECT_ALERT,function(){t.CorrectAlert()},this),this.ID_Buttons.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.StartAnswerAlert,this);var e=this;TweenMax.to(e._quertionListUI,.3,{scaleX:.1,scaleY:.1,ease:Back.easeIn,delay:.2,onComplete:function(){e.removeChild(e._quertionListUI),e._quertionListUI=null,e.ID_Buttons.baseImage.source=RES.getRes("restart-btn_png"),e.ID_QuertionCommonIcon.source=RES.getRes("failed-bg_png"),e.ID_CityName.text="SORRY",e.ID_Buttons.addEventListener(egret.TouchEvent.TOUCH_TAP,e.restartAnser,e),TweenMax.fromTo(e.ID_group,.3,{alpha:0,y:-4e3},{alpha:1,y:0,delay:.3})}})},n.restartAnser=function(){this._eventid=this.firstEventId,this.StartAnswerAlert()},i(n,"eventid",function(){return this._eventid},function(t){this._eventid=t}),i(n,"CityEventId",function(){return this._CityEventId},function(t){this._CityEventId=t}),i(n,"ID_CityName_text",function(){return this._ID_CityName_text},function(t){this._ID_CityName_text=t,this.ID_CityName.text=this._ID_CityName_text}),e}(eui.Component);egret.registerClass(QuertionCommonUI,"QuertionCommonUI");var QuertionListUI=function(t){function e(e){t.call(this),this.eventid=0,this.sourceArr=[],this._nextuncolckevent=0,this.lineHeight=0,this.answer_total=0,this.anser_every_height=[],this.zi_eventid=0,this.eventid=e,this.addEventListener(eui.UIEvent.COMPLETE,this.getevent,this),this.skinName="resource/skins/QuertionListSkin.exml"}__extends(e,t);var i=(__define,e),s=i.prototype;return s.uiCompHandler=function(){var t=new eui.ArrayCollection(this.sourceArr);this.list=new eui.List,this.list.dataProvider=t,this.list.percentWidth=100,this.list.percentHeight=100,this.list.y=280+this.ID_QuertionDesc.textHeight+80;var e='\n       <e:Skin xmlns:e="http://ns.egret.com/eui">\n       <e:Group  width="640" x="0" height="{data.border_h}">\n            <e:Image source="linec_png" left="0" horizontalCenter="0"  scale9Grid="13,23,100,20"   width="{data.border_w}" height="{data.border_h}"/> \n			<e:Label text="{data.f_select}"  size="30" width="400"  multiline="true" lineSpacing="5" verticalAlign="middle" horizontalCenter="0"  textAlign="center" textColor="0x425260" left="180" right="180" top="0" bottom="0"/> \n		</e:Group>\n		</e:Skin>\n        \n        ';this.list.itemRendererSkinName=e,this.addChild(this.list),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.SelectAnswer,this),this.ID_Querstionbg.height=this.answer_total+this.list.y},s.getevent=function(){var t=this,e=new egret.URLLoader,i=new egret.URLRequest("http://www.51tywy.com/service/crossdomain/city/getevent");i.data=new egret.URLVariables("eventid="+this.eventid),i.method=egret.URLRequestMethod.POST,e.load(i),e.addEventListener(egret.Event.COMPLETE,function(e){t._Netdata=JSON.parse(e.target.data),t.ID_CityName.text=t._Netdata.data.zhu_event.f_name,t.ID_QuertionDesc.text=t._Netdata.data.zhu_event.f_desc,t.ID_icon.source=t._Netdata.data.zhu_event.f_icon;var i=t._Netdata.data.zi_event.length,s=300;t.answer_total=0;for(var n=0;i>n;n++){var r=t._Netdata.data.zi_event[n].f_select.length,h=40*Math.ceil(r/9)+33;t.lineHeight=Math.ceil(r/9),t.answer_total+=h;var o=t.answer_total-h/2;t.anser_every_height.push(o),t.sourceArr.push({id:parseInt(t._Netdata.data.zi_event[n].id),f_select:t._Netdata.data.zi_event[n].f_select,f_istrue:parseInt(t._Netdata.data.zi_event[n].f_istrue),border_w:s,border_h:h})}t.answer_total=t.answer_total+50,t.uiCompHandler()},this)},s.onclick_begin=function(){this.dispatchEventWith(QuertionListEvent.EVT_CLOSE)},s.SelectAnswer=function(t){this.zi_eventid=this.list.selectedItem.id,this.unlockevent()},s.unlockevent=function(){var t=this,e=new egret.URLLoader,i=new egret.URLRequest("http://www.51tywy.com/service/crossdomain/city/unlockevent");i.data=new egret.URLVariables("zi_eventid="+this.zi_eventid+"&uid="+StorageSetting.getItem("uid")+"&token="+StorageSetting.getItem("token")),i.method=egret.URLRequestMethod.POST,e.load(i),e.addEventListener(egret.Event.COMPLETE,function(e){t._Netdata=JSON.parse(e.target.data),t._nextuncolckevent=parseInt(t._Netdata.data.unlockevent),t.RewardInfo=t._Netdata.data.rewrdInfo,t.list.selectedItem.f_istrue?(t._right=new egret.Bitmap(RES.getRes("correct_png")),t._right.x=480,t._right.y=t.anser_every_height[t.list.selectedIndex]-15,t.list.addChild(t._right),t.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,t.SelectAnswer,t),t.PassOrNextEvent()):(t._wrong=new egret.Bitmap(RES.getRes("wrong_png")),t._wrong.x=480,t._wrong.y=t.anser_every_height[t.list.selectedIndex]-15,t.list.addChild(t._wrong),t.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,t.SelectAnswer,t),t.PassOrNextEvent())},this)},s.PassOrNextEvent=function(){var t=parseInt(this.RewardInfo.pass);if(this._nextuncolckevent){var e=new QuertionListEvent(QuertionListEvent.EVT_NEXTEVENT_ALERT,this._nextuncolckevent);this.dispatchEvent(e)}else if(t)this.dispatchEventWith(QuertionListEvent.EVT_CORRECT_ALERT);else{var i=new QuertionListEvent(QuertionListEvent.EVT_ERROR_ALERT,0,this.RewardInfo);this.dispatchEvent(i)}},e}(eui.Component);egret.registerClass(QuertionListUI,"QuertionListUI");var AnswerList=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this);var e=new egret.Bitmap;e.texture=RES.getRes("linec_png");var i=new egret.Rectangle(30,31,40,41);e.scale9Grid=i,e.width*=2,e.y=150,this.addChild(e)},e}(eui.ItemRenderer);egret.registerClass(AnswerList,"AnswerList");var ReceveAchievementAwardUI=function(t){function e(){t.call(this),this.stageW=0,this.stageH=0,this.share_b=null,this.Ikonw_b=null,this._desc_text="",this.addEventListener(eui.UIEvent.COMPLETE,this.StartAnswer,this),this.skinName="resource/skins/receiveAchievementAwardSkin.exml",this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth}__extends(e,t);var i=__define,s=e,n=s.prototype;return n.StartAnswer=function(){this.share_b=Utils.createBitmapByName("share-btn_png"),this.share_b.x=332,this.share_b.y=450,this.addChild(this.share_b),this.share_b.scaleX=.3,this.share_b.scaleY=.3,this.share_b.touchEnabled=!0,this.share_b.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareWind,this),this.Ikonw_b=Utils.createBitmapByName("iknow-btn_png"),this.Ikonw_b.x=140,this.Ikonw_b.y=450,this.addChild(this.Ikonw_b),this.Ikonw_b.scaleX=.3,this.Ikonw_b.scaleY=.3,this.Ikonw_b.touchEnabled=!0,this.Ikonw_b.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick_close,this)},n.shareWind=function(){this.dispatchEventWith(QuertionListEvent.EVT_CLOSEREWADR_ALERT);var t=egret.MainContext.instance;t.stage.dispatchEventWith("shareOpen",!1)},n.onclick_close=function(){this.dispatchEventWith(QuertionListEvent.EVT_CLOSEREWADR_ALERT)},i(n,"desc_text",function(){return this._desc_text},function(t){this._desc_text=t,this.ID_receiveAchievementAward_label.text=this._desc_text}),e}(eui.Component);egret.registerClass(ReceveAchievementAwardUI,"ReceveAchievementAwardUI");var AssetAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?s(n):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,s){function n(t){e.call(s,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var CelebrateEvent=function(t){function e(e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1),t.call(this,e,i,s)}__extends(e,t);var i=(__define,e);i.prototype;return e.EVT_CLOSE="EVT_CLOSE",e}(egret.Event);egret.registerClass(CelebrateEvent,"CelebrateEvent");var CityEvent=function(){function t(){}var e=(__define,t);e.prototype;return t.EVT_CLOSE="EVT_CLOSE",t.EVT_LOAD_PAGE="EVT_LOAD_PAGE",t.EVT_CLOSE_ABOUT="EVT_CLOSE_ABOUT",t}();egret.registerClass(CityEvent,"CityEvent");var LoadEvent=function(t){function e(e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1),t.call(this,e,i,s)}__extends(e,t);var i=(__define,e);i.prototype;return e}(RES.ResourceEvent);egret.registerClass(LoadEvent,"LoadEvent");var MyselfEvent=function(t){function e(e,i,s,n){void 0===i&&(i=null),void 0===s&&(s=!1),void 0===n&&(n=!1),t.call(this,e,s,n),this._obj=i}__extends(e,t);var i=__define,s=e,n=s.prototype;return i(n,"obj",function(){return this._obj}),e.HIDETOOL="hidetool",e.Arrived="arrived",e.ENERGY_MOVE_COMPLETE="ENERGY_MOVE_COMPLETE",e}(egret.Event);egret.registerClass(MyselfEvent,"MyselfEvent");var QuertionListEvent=function(t){function e(e,i,s,n,r){void 0===i&&(i=0),void 0===s&&(s=""),void 0===n&&(n=!1),void 0===r&&(r=!1),t.call(this,e,n,r),this._eventid=0,this._rewardInfo=null,this._eventid=i,this._rewardInfo=s}__extends(e,t);var i=__define,s=e,n=s.prototype;return i(n,"eventid",function(){return this._eventid}),i(n,"arr",function(){return this._rewardInfo}),e.EVT_CLOSE="EVT_CLOSE",e.EVT_LOAD_PAGE="EVT_LOAD_PAGE",e.EVT_CLOSE_ABOUT="EVT_CLOSE_ABOUT",e.EVT_OPEN_ALERT="EVT_OPEN_ALERT",e.EVT_CLOSE_ALERT="EVT_CLOSE_ALERT",e.EVT_CORRECT_ALERT="EVT_CORRECT_ALERT",e.EVT_ERROR_ALERT="EVT_ERROR_ALERT",e.EVT_AWARD_ALERT="EVT_AWARD_ALERT",e.EVT_NEXTEVENT_ALERT="EVT_NEXTEVENT_ALERT",e.EVT_REAL_AWARD="EVT_REAL_AWARD",e.EVT_CLOSEREWADR_ALERT="EVT_CLOSEREWADR_ALERT",e.EVT_OPENArriceNewCity_ALERT="EVT_OPENArriceNewCity_ALERT",e.EVT_CLOSArriceNewCity_ALERT="EVT_CLOSArriceNewCity_ALERT",e}(egret.Event);egret.registerClass(QuertionListEvent,"QuertionListEvent");var LoadBar=function(t){function e(){t.call(this),this.bg=null,this.bartop=null,this._barbg=null,this.stageWidth=egret.MainContext.instance.stage.stageWidth,this.stageHeight=egret.MainContext.instance.stage.stageHeight,this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this.bgcont=new egret.DisplayObjectContainer,this.addChild(this.bgcont),this.barcont=new egret.DisplayObjectContainer,this.addChild(this.barcont),this.bg=Utils.createBitmapByName("bg_png"),this.bg.width=this.stageWidth,this.bg.height=this.stageHeight,this.bgcont.addChild(this.bg),this._barbg=Utils.createBitmapByName("loadingUI_progresBar_2_png"),this._barbg.x=this.stageWidth/2,this._barbg.y=this.stageHeight-118,this._barbg.scaleX=.5,this._barbg.scaleY=.5,this._barbg.width=570,this._barbg.height=50,this._barbg.anchorOffsetX=this._barbg.width/2,this.barcont.addChild(this._barbg),this.bartop=Utils.createBitmapByName("loadingUI_progresBar_1_png"),this.bartop.x=this.stageWidth/2,this.bartop.y=this.stageHeight-118+11,this.bartop.scaleX=.5,this.bartop.scaleY=.5,this.bartop.width=550,this.bartop.height=28,this.bartop.anchorOffsetX=this.bartop.width/2,this.bartop.anchorOffsetY=this.bartop.height/2,this.barcont.addChildAt(this.bartop,2),this.textField=new egret.TextField,this.barcont.addChildAt(this.textField,3),this.textField.y=this.stageHeight-112,this.textField.width=640,this.textField.height=100,this.textField.textAlign="center",this.textField.textColor=5071505,this.textField.size=10},s.setProgress=function(t,e){this.maskRect=new egret.Rectangle(0,0,t/e*550,28),this.bartop.mask=this.maskRect,this.textField.text="Loading..."+t+"/"+e},s.hideLoadBar=function(){this.removeChild(this)},e}(egret.Sprite);egret.registerClass(LoadBar,"LoadBar");var Loader=function(t){function e(){t.call(this),this.ResUrl="http://www.51tywy.com/static/reget/bin-release/web/bin-release/"}__extends(e,t);var i=(__define,e),s=i.prototype;return e.getInstance=function(){if(null==e.instance){var t=new e;e.instance=t}return e.instance},s.init=function(){80!=parseInt(location.port)&&location.port&&(this.ResUrl=""),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(this.ResUrl+"resource/resource.json",this.ResUrl+"resource/")},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);new eui.Theme(this.ResUrl+"resource/default.thm.json",null);RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},s.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){this.loadevent=new LoadEvent(LoadEvent.GROUP_PROGRESS),this.loadevent.groupName=t.groupName,this.loadevent.itemsLoaded=t.itemsLoaded,this.loadevent.itemsTotal=t.itemsTotal,this.dispatchEvent(this.loadevent),this.loadevent=null},s.onResourceLoadComplete=function(t){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadevent=new LoadEvent(LoadEvent.GROUP_COMPLETE),this.loadevent.groupName=t.groupName,this.dispatchEvent(this.loadevent),this.loadevent=null},s.load=function(t){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(t),console.log(t+"资源加载完成")},e}(egret.EventDispatcher);egret.registerClass(Loader,"Loader");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=480,this.textField.height=100,this.textField.textAlign="center",this.textField.textColor=16701008,this.textField.size=18},s.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.loadIndexis1st=!0,this.bartop=null,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){egret.Capabilities.isMobile?this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL;var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.addChild(this.loadingView),Loader.getInstance(),Loader.instance.addEventListener(LoadEvent.GROUP_COMPLETE,this.onConfigComplete,this),Loader.instance.addEventListener(LoadEvent.GROUP_PROGRESS,this.loadprogress,this),Loader.instance.init()},s.loadprogress=function(t){var e=t.groupName;switch(e){case"preload":this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal);break;default:this.loadBar.setProgress(t.itemsLoaded,t.itemsTotal)}},s.onConfigComplete=function(t){"preload"==t.groupName?this.preloadComp():"ResGroupwelcome"==t.groupName?(this.removeChild(this.loadBar),this.loadBar=null,this.createGameScene()):this.loadBar.hideLoadBar()},s.preloadComp=function(){this.removeChild(this.loadingView),this.loadingView=null,egret.localStorage.clear(),StorageSetting.loadConfig(),this.loadBar=new LoadBar,this.addChild(this.loadBar),Loader.instance.load("ResGroupwelcome")},s.createGameScene=function(){var t=new xss.Scroll;this.addChild(t)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Annular=function(t){function e(e,i,s,n,r){t.call(this),this.centerPoint={x:0,y:0},this.radius=0,this.radius2=0,this.distance=0,this.color=0,this.spriteList=[],this.centerPoint.x=e,this.centerPoint.y=i,this.radius=s,this.radius2=n,this.distance=n-s,this.color=r,this.createMaskRound()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createMaskRound=function(){var t=new egret.Sprite;t.x=this.centerPoint.x,t.y=this.centerPoint.y,this.addChild(t);var e=new egret.Sprite;t.addChild(e),this.spriteList.push(e);var i=new egret.Shape;i.graphics.beginFill(this.color,1),i.graphics.drawCircle(this.radius2,this.radius2,this.radius2),i.graphics.endFill(),e.addChild(i);var s=new egret.Shape;s.graphics.beginFill(16777215,1),s.graphics.drawRect(0,0,i.width/2,i.height),s.graphics.endFill(),e.addChild(s),t.width=e.width,t.height=e.height,t.mask=new egret.Rectangle(t.width/2,0,t.width/2,t.height),e.x=e.width/2,e.y=e.height/2,e.rotation=-180;var n=new egret.Sprite;n.x=this.centerPoint.x,n.y=this.centerPoint.y,this.addChild(n);var r=new egret.Sprite;n.addChild(r),this.spriteList.push(r),r.rotation=-180;var h=new egret.Shape;h.graphics.beginFill(this.color,1),h.graphics.drawCircle(this.radius2,this.radius2,this.radius2),h.graphics.endFill(),r.addChild(h);var o=new egret.Shape;o.graphics.beginFill(16777215,1),o.graphics.drawRect(i.width/2,0,i.width/2,i.height),o.graphics.endFill(),r.addChild(o),n.width=r.width,n.height=r.height,n.mask=new egret.Rectangle(0,0,n.width/2,n.height),r.x=r.width/2,r.y=r.height/2;var a=new egret.Shape;a.x=this.centerPoint.x,a.y=this.centerPoint.y,a.graphics.lineStyle(2,10066329,1),a.graphics.beginFill(43775,0),a.graphics.drawCircle(this.radius2,this.radius2,this.radius2),a.graphics.endFill(),this.addChild(a);var d=new egret.Shape;d.x=this.centerPoint.x,d.y=this.centerPoint.y,d.graphics.lineStyle(2,10066329,1),d.graphics.beginFill(16777215,1),d.graphics.drawCircle(this.radius,this.radius,this.radius),d.graphics.endFill(),this.addChild(d)},s.setPercent=function(t){0>=t||t>100||(50>=t?this.spriteList[0].rotation+=3.6*t:(this.spriteList[0].rotation+=180,this.spriteList[1].rotation+=3.6*(t-50)))},s.setPercentWithAnimation=function(t,e){if(!(0>=t||t>100)){var i=e/360;if(50>=t){var s=3.6*t;egret.Tween.get(this.spriteList[0]).to({rotation:s-180},s*i)}else{var n=this,s=180;egret.Tween.get(this.spriteList[0]).to({rotation:s-180},s*i).call(function(){var e=3.6*(t-50);console.log(t),egret.Tween.get(n.spriteList[1]).to({rotation:e-180},e*i)})}}},e}(egret.Sprite);egret.registerClass(Annular,"Annular");var BreathImage=function(t){function e(e,i,s){void 0===i&&(i=2e3),void 0===s&&(s=.05),t.call(this,e),this._duration=i,this._offset=s,this.init()}__extends(e,t);var i=__define,s=e,n=s.prototype;return n.init=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},n.play=function(){this.t=0,egret.Tween.get(this,{loop:!0}).to({t:2*Math.PI},this._duration)},i(n,"t",function(){return this._t},function(t){this._t=t,this.scaleX=Math.sin(t)*this._offset+1,this.scaleY=Math.sin(t-Math.PI/2)*this._offset+1}),e}(egret.Bitmap);egret.registerClass(BreathImage,"BreathImage");var CombineBtn=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.combineBtnTxtr=function(t,e,i,s){var n=e.textureHeight/s,r=i*n,h=new egret.Sprite,o=new egret.Bitmap(t);h.addChild(o);var a=new egret.Bitmap(e);a.width=r-2*t.textureWidth,a.fillMode=egret.BitmapFillMode.REPEAT,a.x=t.textureWidth,h.addChild(a);var d=new egret.Bitmap(t);h.addChild(d),d.scaleX=-1,d.x=r;var g=new egret.RenderTexture;return g.drawToTexture(h,new egret.Rectangle(0,0,i,s),1/n),g},e}(egret.Texture);egret.registerClass(CombineBtn,"CombineBtn");var HollowedOutLayer=function(t){function e(e,i,s,n){t.call(this),this.circleX=e,this.circleY=i,this.radius=s,this._alpha=n;var r=egret.MainContext.instance.stage.stageWidth,h=egret.MainContext.instance.stage.stageHeight,o=new egret.Shape;o.x=0,o.y=0,o.graphics.beginFill(0,this._alpha),o.graphics.lineTo(0,h),o.graphics.lineTo(e,h),o.graphics.lineTo(e,i+s),o.graphics.drawArc(e,i,s,.5*Math.PI,1.5*Math.PI),o.graphics.lineTo(e,0),o.graphics.lineTo(0,0),o.graphics.endFill(),this.addChild(o);var a=new egret.Shape;a.x=e,a.y=0,a.graphics.beginFill(0,this._alpha),a.graphics.lineTo(0,h-s),a.graphics.drawArc(0,i,s,1.5*Math.PI,.5*Math.PI),a.graphics.lineTo(0,h),a.graphics.lineTo(r-e,h),a.graphics.lineTo(r-e,0),a.graphics.lineTo(0,0),a.graphics.endFill(),this.addChild(a),this.touchEnabled=!0,this.touchChildren=!1;var d=RES.getRes("guideMC_json"),g=RES.getRes("guideMC_png"),l=new egret.MovieClipDataFactory(d,g);this.guide_nov=new egret.MovieClip(l.generateMovieClipData("finger")),this.guide_nov.scaleX=.7,this.guide_nov.scaleY=.7,this.addChild(this.guide_nov),this.guide_nov.x=r,this.guide_nov.y=h+this.guide_nov.height,egret.Tween.get(this.guide_nov,{loop:!0}).to({x:e,y:i},2e3).call(function(){this.gotoAndPlay(1)}).wait(1e3)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.$hitTest=function(t,e){var i=this.parent.globalToLocal(t,e),s=i.x-this.circleX,n=i.y-this.circleY,r=this.radius;return s*s+n*n>r*r?this:null},e}(egret.DisplayObjectContainer);egret.registerClass(HollowedOutLayer,"HollowedOutLayer");var MyLinear=function(){function t(){this.MyAllposArr=[],this.getI=0,this.arr=[],this.flen=0,this.CurveDist=0}var e=(__define,t),i=e.prototype;return i.GetK=function(t,e,i,s){if(i-t==0)return!1;var n=(s-e)/(i-t);return n},i.GetPos=function(t,e,i,s){var n=new Array;return 0==i?(n.x=t,n.y=s+e,n):(n.x=Math.sqrt(s*s/(i*i+1))+t,n.y=i*(n.x-t)+e,n)},i.GetPosMid=function(t,e,i,s,n){var r=new Array;if(i-t==0)return r.x=t,s-e>0?r.y=n+e:r.y=-n+e,r;var h=(s-e)/(i-t);return i-t>0?r.x=Math.sqrt(n*n/(h*h+1))+t:r.x=-Math.sqrt(n*n/(h*h+1))+t,r.y=h*(r.x-t)+e,r},i.getEndXY=function(t,e,i){void 0===i&&(i=!0),this.roadArr1=t;for(var s,n=0;n<this.roadArr1.length;n++){if(s=new Vector2D(this.roadArr1[n][0],this.roadArr1[n][1]),this.MyAllposArr.push(s),n>0){var r=s.dist(this.MyAllposArr[n-1]);this.getI=this.getCurveDistance(r,n,e),this.arr.push([this.roadArr1[n-1][0],this.roadArr1[n-1][1]])}if(this.getI){n>1?this.flen=e-this.CurveDist:this.flen=e;var h=this.GetPosMid(this.roadArr1[this.getI-1][0],this.roadArr1[this.getI-1][1],this.roadArr1[this.getI][0],this.roadArr1[this.getI][1],this.flen);i?this.arr.push([h.x,h.y]):(this.arr=[],this.arr.push([h.x,h.y]));break}}return this.getI||this.arr.push([this.roadArr1[this.roadArr1.length-1][0],this.roadArr1[this.roadArr1.length-1][1]]),this.arr},i.getCurveDistance=function(t,e,i){return this.CurveDist+=t,i<this.CurveDist?e:void 0},t}();egret.registerClass(MyLinear,"MyLinear");var RequestNetWork=function(){function t(){}var e=(__define,t),i=e.prototype;return i.get=function(){var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT;var e="?p1=getP1&p2=getP2";t.open("http://httpbin.org/get"+e,egret.HttpMethod.GET),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(),t.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),t.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(t){var e=t.currentTarget;console.log("get data : ",e.response)},i.onGetIOError=function(t){console.log("get error : "+t)},i.onGetProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},i.post=function(t,e){var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(t,egret.HttpMethod.POST),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(e),i.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},i.onPostComplete=function(t){var e=t.currentTarget;console.log("post data : ",e.response)},i.onPostIOError=function(t){console.log("post error : "+t)},i.onPostProgress=function(t){console.log("post progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")
},t}();egret.registerClass(RequestNetWork,"RequestNetWork");var SoundManager=function(){function t(){}var e=(__define,t);e.prototype;return t.playEffect=function(t,e){void 0===e&&(e=1);var i=RES.getRes(t);i.type=egret.Sound.EFFECT,i.play(0,1)},t.playBgSound=function(t,e){void 0===e&&(e=!0),this.sdbg=RES.getRes(t),this.sdbg.type=egret.Sound.MUSIC,this.sdbgsoundChannel=this.sdbg.play(0,-1)},t.stopBgSound=function(){null!=this.sdbgsoundChannel&&this.sdbgsoundChannel.stop()},t}();egret.registerClass(SoundManager,"SoundManager");var Utils=function(){function t(){}var e=(__define,t);e.prototype;return t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.containsXY=function(t,e,i,s,n,r){void 0===r&&(r=.5);var h=t-i,o=e-s;return o/=r,Math.sqrt(h*h+o*o)<n?!0:!1},t.drawEllipse=function(t,e,i,s){void 0===s&&(s=!1);var n=new egret.Shape;return n.graphics.lineStyle(1,i),n.graphics.drawEllipse(0,0,t,e),n.graphics.endFill(),n},t.sortarr=function(t){for(var e,i=0;i<t.length;i++)for(var s=t.length-1;s>i;s--)t[s].y<t[s-1].y&&(e=t[s],t[s]=t[s-1],t[s-1]=e);return t},t}();egret.registerClass(Utils,"Utils");var Vector2D=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}var e=__define,i=t,s=i.prototype;return s.draw=function(t,e){void 0===e&&(e=0),t.lineStyle(0,e),t.moveTo(0,0),t.lineTo(this._x,this._y)},s.clone=function(){return new t(this.x,this.y)},s.zero=function(){return this._x=0,this._y=0,this},s.isZero=function(){return 0==this._x&&0==this._y},e(s,"length",function(){return Math.sqrt(this.lengthSQ)},function(t){var e=this.angle;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t}),e(s,"lengthSQ",function(){return this._x*this._x+this._y*this._y}),e(s,"angle",function(){return Math.atan2(this._y,this._x)},function(t){var e=this.length;this._x=Math.cos(t)*e,this._y=Math.sin(t)*e}),s.normalize=function(){if(0==this.length)return this._x=1,this;var t=this.length;return this._x/=t,this._y/=t,this},s.truncate=function(t){return this.length=Math.min(t,this.length),this},s.reverse=function(){return this._x=-this._x,this._y=-this._y,this},s.isNormalized=function(){return 1==this.length},s.dotProd=function(t){return this._x*t.x+this._y*t.y},s.crossProd=function(t){return this._x*t.y-this._y*t.x},t.angleBetween=function(t,e){return t.isNormalized()||(t=t.clone().normalize()),e.isNormalized()||(e=e.clone().normalize()),Math.acos(t.dotProd(e))},s.sign=function(t){return this.perp.dotProd(t)<0?-1:1},e(s,"perp",function(){return new t(-this.y,this.x)}),s.dist=function(t){return Math.sqrt(this.distSQ(t))},s.distSQ=function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},s.add=function(e){return new t(this._x+e.x,this._y+e.y)},s.subtract=function(e){return new t(this._x-e.x,this._y-e.y)},s.multiply=function(e){return new t(this._x*e,this._y*e)},s.divide=function(e){return new t(this._x/e,this._y/e)},s.equals=function(t){return this._x==t.x&&this._y==t.y},e(s,"x",function(){return this._x},function(t){this._x=t}),e(s,"y",function(){return this._y},function(t){this._y=t}),s.tostring=function(){return"[Vector2D (x:"+this._x+", y:"+this._y+")]"},t}();egret.registerClass(Vector2D,"Vector2D");